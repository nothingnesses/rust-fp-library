# v0.1.0 Release Plan: Finalizing Zero-Cost Abstractions

This document outlines the steps required to release version `0.1.0` of `fp-library`. This release will be a **breaking change** that completes the transition to the zero-cost, uncurried architecture.

## Objective

Remove the legacy `v1` (curried) API and promote the `v2` (uncurried) API to the crate root. This will result in a cleaner, single-standard library without the overhead of feature flags or legacy code.

## Prerequisites

- Version `0.0.21` (or later) has been released, providing a migration path.
- Users have been given sufficient notice (via deprecation warnings) to migrate to the new API.

## Execution Steps

### Phase 1: Code Cleanup (Removal of v1)

1.  **Remove Feature Flags**:
    - Remove `v1` and `v2` features from `fp-library/Cargo.toml`.
    - Remove `#[cfg(feature = ...)]` guards from `fp-library/src/lib.rs`.

2.  **Delete Legacy Modules**:
    - Delete `fp-library/src/classes/` (legacy trait definitions).
    - Delete `fp-library/src/types/` (legacy implementations).
    - Delete `fp-library/src/functions.rs` (legacy helpers).
    - *Note*: Ensure `fp-library/src/v2/` is preserved.

### Phase 2: Promotion of v2

1.  **Move v2 to Root**:
    - Move contents of `fp-library/src/v2/classes/` to `fp-library/src/classes/`.
    - Move contents of `fp-library/src/v2/types/` to `fp-library/src/types/`.
    - Move `fp-library/src/v2/functions.rs` to `fp-library/src/functions.rs`.
    - Delete `fp-library/src/v2/` directory.

2.  **Update `lib.rs`**:
    - Update module declarations to point to the new locations.
    - Remove the `v2` module declaration.

### Phase 3: Internal Refactoring

1.  **Fix Internal Imports**:
    - Search and replace `crate::v2::` with `crate::` across the codebase.
    - Fix any relative imports (`super::`) that broke during the move.

2.  **Verify `Kind1L0T` for String**:
    - In `fp-library/src/types/string.rs`, remove the `#[cfg(not(feature = "v2"))]` guard (since v2 is now the only reality).

### Phase 4: Verification and Documentation

1.  **Run Tests**:
    - Run `cargo test` to ensure all tests pass in the new structure.
    - Verify doc tests compile.

2.  **Update Documentation**:
    - Update `README.md` to remove references to "v2" or "migration". The "new" API is now just *the* API.
    - Update crate-level documentation in `lib.rs`.

### Phase 5: Release

1.  **Bump Version**:
    - Update `fp-library/Cargo.toml` version to `0.1.0`.

2.  **Publish**:
    - Commit changes.
    - Tag `v0.1.0`.
    - `cargo publish`.
